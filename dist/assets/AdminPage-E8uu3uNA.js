import{j as e,c as H,d as J,e as W,f as $,g as G,h as M,O as A,D as F}from"./ui-CkkdHTaZ.js";import{r as d}from"./router-D7RsVd5n.js";import{d as w,l as v,B as k,_ as g,e as C,X as K,P as Q,m as X,T as Y,n as Z}from"./index-CdTGuFFa.js";import{I as h,S as q}from"./input-CFBx_Hsp.js";import"./vendor-DJG_os-6.js";import"./animation-CH_iu5NA.js";import"./i18n-ClIRND7o.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],se=w("chart-column",ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],te=w("log-out",ae);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],D=w("package",re);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],le=w("settings",ne);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ce=w("square-pen",ie);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],O=w("trash-2",oe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],me=w("trending-up",de);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],he=w("user",xe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],z=w("users",ge),R="http://localhost:3001";function ue({onLogin:s}){const[o,m]=d.useState({username:"",password:""}),[t,r]=d.useState(!1),u=async p=>{p.preventDefault(),r(!0);try{const l=await(await fetch(`${R}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();l.success?(localStorage.setItem("adminToken",l.token),localStorage.setItem("adminUser",JSON.stringify(l.user)),g.success("Login successful!"),s(l.user)):g.error(l.error||"Login failed")}catch{g.error("Network error. Please try again.")}finally{r(!1)}},x=p=>{const{name:f,value:l}=p.target;m(n=>({...n,[f]:l}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(v,{className:"w-full max-w-md p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Login"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to access the admin panel"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx(h,{id:"username",name:"username",type:"text",required:!0,value:o.username,onChange:x,placeholder:"Enter your username",disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx(h,{id:"password",name:"password",type:"password",required:!0,value:o.password,onChange:x,placeholder:"Enter your password",disabled:t})]}),e.jsx(k,{type:"submit",className:"w-full",disabled:t,children:t?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[e.jsx("p",{children:"Default credentials:"}),e.jsx("p",{children:"Username: admin | Password: admin123"})]})]})})}const I=H,pe=J,fe=W,B=d.forwardRef(({className:s,...o},m)=>e.jsx(A,{ref:m,className:C("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...o}));B.displayName=A.displayName;const E=d.forwardRef(({className:s,children:o,...m},t)=>e.jsxs(fe,{children:[e.jsx(B,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs($,{ref:t,className:C("fixed left-[50%] top-[50%] z-50 w-[90%] max-w-[400px] -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 rounded-xl",s),...m,children:[o,e.jsxs(G,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));E.displayName=$.displayName;const P=({className:s,...o})=>e.jsx("div",{className:C("flex flex-col space-y-1.5 text-center sm:text-left",s),...o});P.displayName="DialogHeader";const L=d.forwardRef(({className:s,...o},m)=>e.jsx(M,{ref:m,className:C("text-lg font-semibold leading-none tracking-tight",s),...o}));L.displayName=M.displayName;const je=d.forwardRef(({className:s,...o},m)=>e.jsx(F,{ref:m,className:C("text-sm text-muted-foreground",s),...o}));je.displayName=F.displayName;function ye(){const[s,o]=d.useState([]),[m,t]=d.useState(!0),[r,u]=d.useState(""),[x,p]=d.useState(""),[f,l]=d.useState(!1),[n,i]=d.useState(null);d.useEffect(()=>{c()},[]);const c=async()=>{try{const a=await fetch("/api/products");if(a.ok){const S=await a.json();o(S.products||[])}}catch{g.error("Failed to load products")}finally{t(!1)}},j=async a=>{if(confirm("Are you sure you want to delete this product?"))try{const S=localStorage.getItem("adminToken"),_=await fetch(`/api/products/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${S}`}});if(_.ok)g.success("Product deleted successfully"),c();else{const V=await _.json();g.error(V.error||"Failed to delete product")}}catch{g.error("Network error")}},b=s.filter(a=>{const S=a.name.toLowerCase().includes(r.toLowerCase())||a.description?.toLowerCase().includes(r.toLowerCase()),_=!x||a.category===x;return S&&_}),y={office:"辦公家具",living:"客廳家具",dining:"餐廳家具",bedroom:"臥室家具",outdoor:"戶外家具",kids:"兒童家具",storage:"收納整理",accent:"裝飾家具"},N=Object.keys(y);return m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},a))})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),e.jsxs(I,{open:f,onOpenChange:l,children:[e.jsx(pe,{asChild:!0,children:e.jsxs(k,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Product"})]})}),e.jsxs(E,{className:"max-w-2xl",children:[e.jsx(P,{children:e.jsx(L,{children:"Create New Product"})}),e.jsx(T,{onSuccess:()=>{l(!1),c()},onCancel:()=>l(!1)})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(h,{placeholder:"Search products...",value:r,onChange:a=>u(a.target.value),className:"pl-10"})]}),e.jsxs("select",{value:x,onChange:a=>p(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),N.map(a=>e.jsxs("option",{value:a,children:[y[a]," (",a,")"]},a))]})]}),e.jsx(v,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:a.images&&a.images[0]?e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:a.images[0],alt:""}):a.image_url?e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:a.image_url,alt:""}):e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(D,{className:"h-6 w-6 text-gray-400"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.name}),e.jsx("div",{className:"text-xs text-gray-500",children:a.nameEn}),e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:a.description}),a.rating&&e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(X,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:[a.rating," (",a.reviews,")"]})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded-full",children:y[a.category]||a.category})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",a.price]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a.inStock===!0?"bg-green-100 text-green-800":a.inStock===!1?"bg-red-100 text-red-800":a.stock_quantity>10?"bg-green-100 text-green-800":a.stock_quantity>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.inStock!==void 0?a.inStock?"In Stock":"Out of Stock":`${a.stock_quantity||0} units`})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a.is_featured?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:a.is_featured?"Featured":"Regular"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>i(a),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(O,{className:"h-4 w-4"})})]})]},a.id))})]})})}),n&&e.jsx(I,{open:!!n,onOpenChange:()=>i(null),children:e.jsxs(E,{className:"max-w-2xl",children:[e.jsx(P,{children:e.jsx(L,{children:"Edit Product"})}),e.jsx(T,{product:n,onSuccess:()=>{i(null),c()},onCancel:()=>i(null)})]})})]})}function T({product:s,onSuccess:o,onCancel:m}){const[t,r]=d.useState({name:s?.name||"",nameEn:s?.nameEn||"",description:s?.description||"",descriptionEn:s?.descriptionEn||"",price:s?.price||"",category:s?.category||"",images:s?.images||[""],image_url:s?.image_url||"",stock_quantity:s?.stock_quantity||0,inStock:s?.inStock!==void 0?s.inStock:!0,is_featured:s?.is_featured||!1,rating:s?.rating||0,reviews:s?.reviews||0,specifications:{material:s?.specifications?.material||"",materialEn:s?.specifications?.materialEn||"",dimensions:s?.specifications?.dimensions||"",dimensionsEn:s?.specifications?.dimensionsEn||"",weight:s?.specifications?.weight||"",weightEn:s?.specifications?.weightEn||"",color:s?.specifications?.color||[],colorEn:s?.specifications?.colorEn||[]}}),u={office:"辦公家具",living:"客廳家具",dining:"餐廳家具",bedroom:"臥室家具",outdoor:"戶外家具",kids:"兒童家具",storage:"收納整理",accent:"裝飾家具"},[x,p]=d.useState(!1),f=async n=>{n.preventDefault(),p(!0);try{const i=localStorage.getItem("adminToken"),c=s?`/api/products/${s.id}`:"/api/products",b=await fetch(c,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({...t,price:parseFloat(t.price),stock_quantity:parseInt(t.stock_quantity),rating:parseFloat(t.rating)||0,reviews:parseInt(t.reviews)||0})});if(b.ok)g.success(`Product ${s?"updated":"created"} successfully`),o();else{const y=await b.json();g.error(y.error||"Operation failed")}}catch{g.error("Network error")}finally{p(!1)}},l=n=>{const{name:i,value:c,type:j,checked:b}=n.target;if(i.startsWith("spec_")){const y=i.replace("spec_","");r(N=>({...N,specifications:{...N.specifications,[y]:c}}))}else if(i==="images"){const y=c.split(`
`).filter(N=>N.trim());r(N=>({...N,images:y}))}else if(i==="colors"||i==="colorsEn"){const y=i==="colors"?"color":"colorEn",N=c.split(",").map(a=>a.trim()).filter(a=>a);r(a=>({...a,specifications:{...a.specifications,[y]:N}}))}else r(y=>({...y,[i]:j==="checkbox"?b:c}))};return e.jsxs("form",{onSubmit:f,className:"space-y-6 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name (Chinese)"}),e.jsx(h,{name:"name",value:t.name,onChange:l,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name (English)"}),e.jsx(h,{name:"nameEn",value:t.nameEn,onChange:l})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{name:"category",value:t.category,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),Object.entries(u).map(([n,i])=>e.jsxs("option",{value:n,children:[i," (",n,")"]},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Chinese)"}),e.jsx("textarea",{name:"description",value:t.description,onChange:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (English)"}),e.jsx("textarea",{name:"descriptionEn",value:t.descriptionEn,onChange:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pricing & Stock"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),e.jsx(h,{name:"price",type:"number",step:"0.01",value:t.price,onChange:l,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity"}),e.jsx(h,{name:"stock_quantity",type:"number",value:t.stock_quantity,onChange:l})]}),e.jsxs("div",{className:"flex items-center pt-6",children:[e.jsx("input",{type:"checkbox",name:"inStock",id:"inStock",checked:t.inStock,onChange:l,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"inStock",className:"ml-2 block text-sm text-gray-700",children:"In Stock"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Images"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URLs (one per line)"}),e.jsx("textarea",{name:"images",value:t.images.join(`
`),onChange:l,rows:4,placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Single Image URL (fallback)"}),e.jsx(h,{name:"image_url",type:"url",value:t.image_url,onChange:l})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material (Chinese)"}),e.jsx(h,{name:"spec_material",value:t.specifications.material,onChange:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material (English)"}),e.jsx(h,{name:"spec_materialEn",value:t.specifications.materialEn,onChange:l})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dimensions (Chinese)"}),e.jsx(h,{name:"spec_dimensions",value:t.specifications.dimensions,onChange:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dimensions (English)"}),e.jsx(h,{name:"spec_dimensionsEn",value:t.specifications.dimensionsEn,onChange:l})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (Chinese)"}),e.jsx(h,{name:"spec_weight",value:t.specifications.weight,onChange:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (English)"}),e.jsx(h,{name:"spec_weightEn",value:t.specifications.weightEn,onChange:l})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Colors (Chinese, comma-separated)"}),e.jsx(h,{name:"colors",value:t.specifications.color.join(", "),onChange:l,placeholder:"黑色, 白色, 灰色"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Colors (English, comma-separated)"}),e.jsx(h,{name:"colorsEn",value:t.specifications.colorEn.join(", "),onChange:l,placeholder:"Black, White, Gray"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rating & Features"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating (0-5)"}),e.jsx(h,{name:"rating",type:"number",step:"0.1",min:"0",max:"5",value:t.rating,onChange:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reviews Count"}),e.jsx(h,{name:"reviews",type:"number",value:t.reviews,onChange:l})]}),e.jsxs("div",{className:"flex items-center pt-6",children:[e.jsx("input",{type:"checkbox",name:"is_featured",id:"is_featured",checked:t.is_featured,onChange:l,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_featured",className:"ml-2 block text-sm text-gray-700",children:"Featured Product"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(k,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:x,children:x?"Saving...":s?"Update":"Create"})]})]})}function U({stats:s,loading:o}){if(o)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(r=>e.jsxs(v,{className:"p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},r))})});if(!s)return e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Failed to load dashboard stats"});const m=[{title:"Total Products",value:s.totalProducts,icon:D,color:"blue"},{title:"Total Users",value:s.totalUsers,icon:z,color:"green"},{title:"Low Stock Items",value:s.lowStockProducts?.length||0,icon:Y,color:"yellow"},{title:"Recent Products",value:s.recentProducts?.length||0,icon:me,color:"purple"}],t=r=>{const u={blue:"text-blue-600 bg-blue-100",green:"text-green-600 bg-green-100",yellow:"text-yellow-600 bg-yellow-100",purple:"text-purple-600 bg-purple-100"};return u[r]||u.blue};return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:m.map((r,u)=>{const x=r.icon;return e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.value})]}),e.jsx("div",{className:`p-3 rounded-full ${t(r.color)}`,children:e.jsx(x,{className:"h-6 w-6"})})]})},u)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Products"}),e.jsx("div",{className:"space-y-3",children:s.recentProducts?.length>0?s.recentProducts.map(r=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["$",r.price]})]},r.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent products"})})]}),e.jsxs(v,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Low Stock Alert"}),e.jsx("div",{className:"space-y-3",children:s.lowStockProducts?.length>0?s.lowStockProducts.map(r=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Product ID: ",r.id]})]}),e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold bg-red-100 text-red-800 rounded-full",children:[r.stock_quantity," left"]})]},r.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"All products are well stocked"})})]})]})]})}function be(){const[s,o]=d.useState([]),[m,t]=d.useState(!0),[r,u]=d.useState("");d.useEffect(()=>{x()},[]);const x=async()=>{try{const n=localStorage.getItem("adminToken"),i=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${n}`}});if(i.ok){const c=await i.json();o(c.users||[])}}catch{g.error("Failed to load users")}finally{t(!1)}},p=async n=>{if(confirm("Are you sure you want to delete this user?"))try{const i=localStorage.getItem("adminToken"),c=await fetch(`/api/admin/users/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}});if(c.ok)g.success("User deleted successfully"),x();else{const j=await c.json();g.error(j.error||"Failed to delete user")}}catch{g.error("Network error")}},f=async(n,i)=>{try{const c=localStorage.getItem("adminToken"),j=await fetch(`/api/admin/users/${n}/role`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({role:i})});if(j.ok)g.success("User role updated successfully"),x();else{const b=await j.json();g.error(b.error||"Failed to update user role")}}catch{g.error("Network error")}},l=s.filter(n=>n.username.toLowerCase().includes(r.toLowerCase())||n.email.toLowerCase().includes(r.toLowerCase()));return m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(n=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},n))})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(h,{placeholder:"Search users...",value:r,onChange:n=>u(n.target.value),className:"pl-10"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(he,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.username}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",n.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:n.role,onChange:i=>f(n.id,i.target.value),className:`px-2 py-1 text-xs font-semibold rounded-full border-0 focus:ring-2 focus:ring-blue-500 ${n.role==="admin"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(n.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(k,{variant:"outline",size:"sm",onClick:()=>p(n.id),className:"text-red-600 hover:text-red-700",children:e.jsx(O,{className:"h-4 w-4"})})})]},n.id))})]}),l.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found"})]})})]})}function Ne({user:s,onLogout:o}){const[m,t]=d.useState("dashboard"),[r,u]=d.useState(null),[x,p]=d.useState(!0);d.useEffect(()=>{f()},[]);const f=async()=>{try{const c=localStorage.getItem("adminToken"),j=await fetch(`${R}/api/admin/dashboard`,{headers:{Authorization:`Bearer ${c}`}});if(j.ok){const b=await j.json();u(b.stats)}}catch{g.error("Failed to load dashboard stats")}finally{p(!1)}},l=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),g.success("Logged out successfully"),o()},n=[{id:"dashboard",label:"Dashboard",icon:se},{id:"products",label:"Products",icon:D},{id:"users",label:"Users",icon:z},{id:"settings",label:"Settings",icon:le}],i=()=>{switch(m){case"dashboard":return e.jsx(U,{stats:r,loading:x});case"products":return e.jsx(ye,{});case"users":return e.jsx(be,{});case"settings":return e.jsx("div",{className:"p-6",children:"Settings coming soon..."});default:return e.jsx(U,{stats:r,loading:x})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-8 w-8 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xl font-bold",children:"ChairGo Admin"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",s.username]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:l,className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("div",{className:"w-64 space-y-2",children:e.jsx(v,{className:"p-4",children:e.jsx("nav",{className:"space-y-2",children:n.map(c=>{const j=c.icon;return e.jsxs("button",{onClick:()=>t(c.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${m===c.id?"bg-blue-50 text-blue-700 border border-blue-200":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx(j,{className:"h-5 w-5"}),e.jsx("span",{children:c.label})]},c.id)})})})}),e.jsx("div",{className:"flex-1",children:e.jsx(v,{children:i()})})]})})]})}function Pe(){const[s,o]=d.useState(null),[m,t]=d.useState(!0);d.useEffect(()=>{const x=localStorage.getItem("adminToken"),p=localStorage.getItem("adminUser");if(x&&p)try{const f=JSON.parse(p);o(f)}catch{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser")}t(!1)},[]);const r=x=>{o(x)},u=()=>{o(null)};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?e.jsx(Ne,{user:s,onLogout:u}):e.jsx(ue,{onLogin:r})}export{Pe as default};
