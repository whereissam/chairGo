import{j as e}from"./ui-BhTD1AZt.js";import{u as b,r as i}from"./router-CRNUPkV4.js";import{a as p,i as h,p as l}from"./index-DOtWuEAU.js";import{u as j}from"./i18n-DbhNsBPf.js";import"./vendor-DJG_os-6.js";import"./animation-CH_iu5NA.js";async function v(r,d){return console.error("Google Script URL is not configured"),{success:!1,error:"checkout.errorMessage",details:"Google Script URL is not configured"}}function I(){const{t:r,i18n:d}=j(),{cart:c,getTotal:f,clearCart:x}=p(),u=b(),[t,n]=i.useState({name:"",email:"",phone:"",address:""}),[o,m]=i.useState(!1);i.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const g=async s=>{if(s.preventDefault(),!o){m(!0);try{const a=await v(c,t);a.success?(l.success(r(a.message,{orderId:a.orderId}),{duration:3e3}),setTimeout(()=>{x(),u("/")},2e3)):l.error(r(a.error))}catch{l.error(r("checkout.errorMessage"))}finally{m(!1)}}};return i.useEffect(()=>{c.length===0&&!o&&u("/")},[c,u,o]),e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:r("checkout.title")}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("checkout.name")}),e.jsx("input",{type:"text",required:!0,className:"w-full p-2 border rounded-md bg-background text-foreground",value:t.name,onChange:s=>n({...t,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("checkout.email")}),e.jsx("input",{type:"email",required:!0,className:"w-full p-2 border rounded-md bg-background text-foreground",value:t.email,onChange:s=>n({...t,email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("checkout.phone")}),e.jsx("input",{type:"tel",required:!0,className:"w-full p-2 border rounded-md bg-background text-foreground",value:t.phone,onChange:s=>n({...t,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("checkout.address")}),e.jsx("textarea",{required:!0,className:"w-full p-2 border rounded-md bg-background text-foreground",value:t.address,onChange:s=>n({...t,address:s.target.value}),rows:3})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:r("cart.total")}),e.jsx("span",{className:"font-bold",children:h(f(),d.language)})]})}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 disabled:opacity-50",children:r(o?"checkout.processing":"checkout.submitOrder")})]})]})}export{I as CheckoutForm};
